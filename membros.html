<html style="font-size: 47.2px;">
<head>
    <meta charset="utf-8">
    <title>Ai Tech 360 History</title>
    <meta name="viewport"
          content="width=device-width,initial-scale=1,maximum-scale=1,minimum-scale=1,user-scalable=no,viewport-fit=cover">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="full-screen" content="true">
    <meta name="x5-fullscreen" content="true">
    <meta name="360-fullscreen" content="true">
    <meta name="renderer" content="webkit">

    <style>* {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        html,
        body {
            width: 100%;
        }</style>
    <link href="https://aitech360.site/public/static/css/app.c1933b14.css" rel="preload" as="style">
    <link href="https://aitech360.site/public/static/css/chunk-vant.d14f5539.css" rel="preload" as="style">
    <link href="https://aitech360.site/public/static/css/chunk-vendors.794edbf9.css" rel="preload" as="style">
    <link href="https://aitech360.site/public/static/css/chunk-vant.d14f5539.css" rel="stylesheet">
    <link href="https://aitech360.site/public/static/css/chunk-vendors.794edbf9.css" rel="stylesheet">
    <link href="https://aitech360.site/public/static/css/app.c1933b14.css" rel="stylesheet">
    <link rel="stylesheet" type="text/css" href="https://aitech360.site/public/static/css/chunk-495634f2.19df3560.css">
    <link rel="stylesheet" type="text/css" href="https://aitech360.site/public/static/css/chunk-5576a184.9f52f39a.css">
    <link rel="stylesheet" type="text/css" href="https://aitech360.site/public/static/css/chunk-3b94db02.5929650c.css">
    <link rel="stylesheet" type="text/css" href="https://aitech360.site/public/static/css/chunk-a6d04a00.3a1821fc.css">
    <link rel="stylesheet" type="text/css" href="https://aitech360.site/public/static/css/chunk-9884782a.e91864af.css">
    <style>
        .head[data-v-a53c4a36] {
            padding: 20px 0;
        }
        .badger {
            background: bisque;
            padding: 3px 8px;
            text-align: center;
            text-transform: capitalize;
        }
    </style>

    <style>
.member-item {
    transition: transform 0.2s ease, box-shadow 0.2s ease;
}

.member-item:hover {
    transform: translateY(-2px);
    box-shadow: 0 4px 8px rgba(0,0,0,0.15);
}

.badger {
    font-size: 10px;
    padding: 2px 8px;
    border-radius: 10px;
    font-weight: bold;
}

.stats-card {
    background: white;
    border-radius: 10px;
    padding: 15px;
    text-align: center;
    box-shadow: 0 2px 4px rgba(0,0,0,0.1);
}

.stats-value {
    font-size: 24px;
    font-weight: bold;
    color: #1890ff;
    margin-bottom: 5px;
}

.stats-label {
    font-size: 12px;
    color: #666;
}

.filter-select {
    width: 100%;
    padding: 10px;
    border: 1px solid #ddd;
    border-radius: 6px;
    background: white;
}
</style>

</head>
<body class="w856">
<div id="app" class="applang">
    <div data-v-6e534c71="" data-v-443ea612="" class="page">
        <div data-v-6e534c71="" class="headers">
            <div data-v-a53c4a36="" data-v-443ea612="" class="head" data-v-6e534c71="">
                <div data-v-a53c4a36="" class="container flex">
                    <div data-v-a53c4a36="" class="back" onclick="window.location.href='https://aitech360.site/realizar_saque'"><img data-v-a53c4a36=""
                                                                                                                          src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAALkSURBVHgB7ZnPThNBHMd/v9lpK6XFJrWlG5DsoYeqkNSbN/UN8AmEJ9A3EJ/A+ATi0ZMc9YTePFbgwIHDJqBZMDEDLGvTf+NvhBVKgENnZnvZT9J0822y+/3u7Mzvt1OAlJSUlBQNEMbAzMz9Zpc5L6SUh92QrwjREjAiHBJGme8xvk53roSIkCkMAAS8hBFhkCC1WsMj8x/psBRryOAxaJBYAGVeZrLrdOhd1JmUb0GDRB6h68yjhNfB3uYqaGB9BEolr3S9+Y0V0MTqKqTMZwtT6zRXm5cu+j7Y3VgCA1h9hHLF4jv6ag6ruBbsfl8CQ1gLUL27QOZx8aImEVodhstgECtzoDo3/woBl4ZEBL/D2FPhj160rsJ4gH/mJVsZEsk8WjB/emqD3GQ+8Fs+WMBYgHGYP72EASpzD54z6axeOrMg8w9tmldoz4Gqu7B4lXlu+c6fX0qDCnWWiFxVWeosz3UJ8tnB7uYaJIDeCKDzBs46SynPJJDLSZlXmF1GJX7pdaUPCaIVwOHOslpp6LBNn8/06HxlnD2pVJpNSAgHNAhFIPK5uQ/AB4c0BYJYRy4b+ZwroigIwDJaARRR9DOcyrt7ksnhu84H3mTuzk4U/QrBItoBFGFII1F0BaJsxBr1Qhw4ztsOYSSAIjoOgkJxuk3O67GmQkiH1bOOu91uB22wgLEAipPj/b3ilKvqgBdrVB9uYUY2bIUwGkARHgV+kiGMB1DcFKJanmgJIXpgCCsBFCrE5O0qVWmsxZoK0e1n6pVyfstUCGsBFCdHB9uXQ1CKQqefnY2OD1pgAOvbKnmn/IlajKGCRluKnupiwQBWR0AhhN+rlO9tdfvtOq2rhf8/MKzlJ6dvReH+DmhgPYDiNIS70+tToaN5EOu0Lzqbo9rxh5ZfGJHE9kZ9eqGfyLBV2pEberHnMNBq/BLdnb4qhETmgwZj+YPD85qlk17nUV9y8fvHxjdISUlJSRkXfwFHSxhpEL4NbwAAAABJRU5ErkJggg=="
                                                                                                                          alt=""></div>
                    <div data-v-a53c4a36="" class="name tac"> Comissão de Equipe</div>
                    <div data-v-a53c4a36="" class="flex1"></div>
                </div>
                <div data-v-a53c4a36=""></div>
            </div>
        </div>
        <div data-v-6e534c71="" id="scroll" class="content-container" style="padding-top: 0px; padding-bottom: 62px;">
    <div data-v-6e534c71="" id="content" class="content-scroll">
        <div data-v-443ea612="" data-v-6e534c71="" class="container">
            <div data-v-443ea612="" data-v-6e534c71="" class="itemBox">
                <!-- Os filtros e estatísticas serão inseridos aqui via JavaScript -->
                <div data-v-443ea612="" data-v-6e534c71="" class="list" style="margin-top: 20px;">
                    <!-- Os membros serão carregados aqui -->
                </div>
            </div>
        </div>
    </div>

    <script>
// Função para carregar os membros da equipe
async function loadTeamMembers() {
    try {
        const tokenData = JSON.parse(localStorage.getItem('user_token'));
        if (!tokenData || !tokenData.token) {
            window.location.href = '/index.html';
            return;
        }

        const response = await fetch('https://bd-1-tile.onrender.com/api/team/members-detailed', {
            headers: {
                'Authorization': `Bearer ${tokenData.token}`,
                'Content-Type': 'application/json'
            }
        });

        if (!response.ok) {
            throw new Error('Erro ao carregar dados da equipe');
        }

        const data = await response.json();
        
        if (data.success) {
            displayTeamMembers(data.data.members);
        } else {
            throw new Error(data.message);
        }
    } catch (error) {
        console.error('Erro:', error);
        alert('Erro ao carregar membros da equipe: ' + error.message);
    }
}

// Função para exibir os membros na página
function displayTeamMembers(members) {
    const container = document.querySelector('.list');
    
    if (members.length === 0) {
        container.innerHTML = `
            <div style="text-align: center; padding: 40px; color: #666;">
                <p>Nenhum membro na equipe ainda</p>
                <p style="font-size: 14px; margin-top: 10px;">Compartilhe seu link de convite para adicionar membros</p>
            </div>
        `;
        return;
    }

    container.innerHTML = members.map(member => `
        <div class="member-item" style="
            background: white;
            border-radius: 10px;
            padding: 15px;
            margin-bottom: 10px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            display: flex;
            justify-content: space-between;
            align-items: center;
        ">
            <div style="flex: 1;">
                <div style="display: flex; align-items: center; margin-bottom: 8px;">
                    <span style="font-weight: bold; color: #333; margin-right: 10px;">
                        ${member.mobile}
                    </span>
                    <span class="badger" style="
                        background: ${getLevelColor(member.level)};
                        color: white;
                        padding: 2px 8px;
                        border-radius: 12px;
                        font-size: 12px;
                    ">
                        Nível ${member.level}
                    </span>
                </div>
                
                <div style="font-size: 12px; color: #666;">
                    <div style="margin-bottom: 4px;">
                        <strong>Recarga Total:</strong> KZ ${member.total_recharge.toFixed(2)}
                    </div>
                    <div style="margin-bottom: 4px;">
                        <strong>Bônus Gerado:</strong> KZ ${member.generated_bonus.toFixed(2)}
                    </div>
                    <div style="display: flex; justify-content: space-between;">
                        <span>
                            <strong>Status:</strong> 
                            <span style="color: ${member.status === 'active' ? '#52c41a' : '#f5222d'}">
                                ${member.status === 'active' ? 'Ativo' : 'Inativo'}
                            </span>
                        </span>
                        <span>
                            <strong>Comissão:</strong> ${getCommissionPercentage(member.level)}%
                        </span>
                    </div>
                </div>
            </div>
            
            <div style="text-align: right; margin-left: 15px;">
                <div style="background: #f0f2f5; padding: 8px 12px; border-radius: 6px;">
                    <div style="font-size: 14px; font-weight: bold; color: #1890ff;">
                        KZ ${member.bonus_value.toFixed(2)}
                    </div>
                    <div style="font-size: 10px; color: #666;">Bônus</div>
                </div>
            </div>
        </div>
    `).join('');
}

// Função auxiliar para cor do nível
function getLevelColor(level) {
    const colors = {
        1: '#ff4d4f', // Vermelho para nível 1
        2: '#1890ff', // Azul para nível 2
        3: '#52c41a'  // Verde para nível 3
    };
    return colors[level] || '#666';
}

// Função para obter porcentagem de comissão
function getCommissionPercentage(level) {
    const percentages = {
        1: 27,
        2: 3,
        3: 1
    };
    return percentages[level] || 0;
}

// Adicionar filtros e estatísticas no topo
function addFiltersAndStats() {
    const container = document.querySelector('.itemBox');
    
    // Criar header com estatísticas
    const statsHeader = document.createElement('div');
    statsHeader.innerHTML = `
        <div style="
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 20px;
        ">
            <div style="display: flex; justify-content: space-between; align-items: center;">
                <div>
                    <h3 style="margin: 0 0 10px 0; font-size: 18px;">Minha Equipe</h3>
                    <p style="margin: 0; opacity: 0.9; font-size: 14px;">
                        Gerencie e acompanhe sua rede
                    </p>
                </div>
                <button onclick="loadTeamMembers()" style="
                    background: rgba(255,255,255,0.2);
                    border: 1px solid rgba(255,255,255,0.3);
                    color: white;
                    padding: 8px 16px;
                    border-radius: 20px;
                    cursor: pointer;
                ">
                    ↻ Atualizar
                </button>
            </div>
            
            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(120px, 1fr)); gap: 15px; margin-top: 15px;">
                <div style="text-align: center;">
                    <div style="font-size: 24px; font-weight: bold;">${getTotalMembers()}</div>
                    <div style="font-size: 12px; opacity: 0.8;">Total Membros</div>
                </div>
                <div style="text-align: center;">
                    <div style="font-size: 24px; font-weight: bold;">R$ ${getTotalBonus()}</div>
                    <div style="font-size: 12px; opacity: 0.8;">Bônus Total</div>
                </div>
                <div style="text-align: center;">
                    <div style="font-size: 24px; font-weight: bold;">R$ ${getTotalRecharge()}</div>
                    <div style="font-size: 12px; opacity: 0.8;">Recarga Total</div>
                </div>
            </div>
        </div>
        
        <div style="display: flex; gap: 10px; margin-bottom: 20px;">
            <select id="levelFilter" onchange="filterByLevel()" style="
                padding: 8px 12px;
                border: 1px solid #ddd;
                border-radius: 6px;
                flex: 1;
            ">
                <option value="">Todos os Níveis</option>
                <option value="1">Nível 1 (27%)</option>
                <option value="2">Nível 2 (3%)</option>
                <option value="3">Nível 3 (1%)</option>
            </select>
            
            <select id="statusFilter" onchange="filterByStatus()" style="
                padding: 8px 12px;
                border: 1px solid #ddd;
                border-radius: 6px;
                flex: 1;
            ">
                <option value="">Todos os Status</option>
                <option value="active">Ativos</option>
                <option value="inactive">Inativos</option>
            </select>
        </div>
    `;
    
    container.insertBefore(statsHeader, container.querySelector('.list'));
}

// Funções auxiliares para estatísticas (implementar conforme necessidade)
function getTotalMembers() {
    // Implementar lógica para contar membros totais
    return '0';
}

function getTotalBonus() {
    // Implementar lógica para calcular bônus total
    return '0.00';
}

function getTotalRecharge() {
    // Implementar lógica para calcular recarga total
    return '0.00';
}

// Funções de filtro
function filterByLevel() {
    const level = document.getElementById('levelFilter').value;
    // Implementar filtragem por nível
    console.log('Filtrar por nível:', level);
}

function filterByStatus() {
    const status = document.getElementById('statusFilter').value;
    // Implementar filtragem por status
    console.log('Filtrar por status:', status);
}

// Carregar quando a página estiver pronta
document.addEventListener('DOMContentLoaded', function() {
    addFiltersAndStats();
    loadTeamMembers();
});
</script>

</body>
</html>
